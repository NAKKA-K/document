# AndroidStudio2.3 AttensionPoints

## 処理の流れ
- アプリの最初は`onCreate`メソッドから始まります

- `setContentView(R.layout.activity_main);`の`activity_main`の部分には、このソースに対応したxmlファイルの名前を記述します。

- `EditText`や`TextView`等のコンポーネントは、`findViewById(R.id.button)`でフィールドに代入してIDを保存する等しておきます。
	このときの関数の戻り値はコンポーネントと同じ型にキャストする必要があります。

- ボタンは`fineViewById(R.id.button).setOnClickListener(this);`でボタンのリスナークラスを登録します。
	`button`と書かれているところは自分の設定したボタンの名前に置き換えてください。

- `EditText`で入力を条件として動作をさせたい時は、テキストが変更される前、変更されるとき、テキストが変更された後の3段階で呼ばれるメソッドに処理を書くことができます。(全てTextWatcherのOverride)
	- `public void beforeTextChanged(CharSequence s, int start, int count, int after){}`
	- `public void onTextChanged(CharSequence s, int start, int before, int count){}`
	- `public void afterTextChanged(Editable s){}`

- ボタンをクリックしたときの処理は`public void onClick(View v){}`記述します。
	`v.getId();`でint型のIDを取得します。
	そのIDをR.id.buttonと等価することによって、どのボタンが押されたか判定できる。

- 画面遷移をしたいときは方法が複数あります。
	画面遷移する場合は1つの画面ごとに、Activityクラスを分けるべきです。
	`Intent intent = new Intent(this, AnotherActivity.class);`で遷移先で使うActivityクラスを設定します。
	そして遷移先から戻り値が必要な場合は`startActivityForResult(intent, 1);`を、必要ない場合は`startActivity(intent, 1);`を実行します。
	`1`の部分は複数画面で構成されている場合に、任意のCodeを渡すことによって帰って来た時にどの画面かCodeで判別することができます。
	(Codeはフィールドのfinalで宣言しておくと便利です)

- 画面遷移先から遷移もとに戻るときには複数の戻り方があります。
	 戻り値ありの遷移だった場合、`Intent data = new Intent();`でデータの入れ物を作成。
	`data.putExtra("result", result);`でkeyとvalueを設定。
	`setResult(RESULT_OK, date);`で戻り値が正常であることと、データを格納したIntentをセットします。
	戻り値が取得できなかった場合、`RESULT_CANCELED`をセットします。


## UIの作り方(ConstraintLayout)
- コンポーネントには制約を付けなければいけないけません。
	`ConstraintLayout`にはコンポーネントに制約を付けることによって、様々な画面に対応することができる画面が作成できます。
	もし制約を付けていない場合、基本的にはコンポーネントの座標が`(0,0)`に飛ばされてしまいます。

- 制約の付け方は複数あります。
	1つ目は手動でつける場合があります。
	選択中コンポーネントの上下左右の辺に丸い点が表示されます。
	それをクリックした状態でドラッグさせると線が伸びます。
	そのまま別のコンポーネントの点に対して繋ぐと、制約を付けることができます。
	もしくはフレームの辺に線を繋ぐこともできます。

	2つ目はコンポーネントをすべて設置した後に一括で制約を付ける方法です。
	最初に画面のコンポーネントをすべて配置し終わった後、すべてのコンポーネントに対して`Infer Constraintsボタン`を実行します。
	するとすべてのコンポーネント同士で制約を付けてくれるので、それなりの精度でできます。
	しかし新機能なので完璧な制約はつかない場合があります。
	その時は一部のみ手動で制約を設定してやると、うまく動きます。

	3つ目はコンポーネントを置くと同時に制約を自動で付けてくれる方法です。
	`Preview`の画面で、`Turn On Autoconnectボタン`をオンにしておくとできます。
	しかしこの方法はあまり精度がよくないと感じたので、おすすめしません。

- 制約の一部を紹介します。
	例えば2つのコンポーネントの上同士を繋ぐと、上のラインで高さをそろえます。
	2つのコンポーネントの右同士を繋ぐと、右のラインで横をそろえます。
	これらはフレームの辺につなぐと、同じようにフレームの辺に吸い寄せられます。
	1つのコンポーネントから両端に線を繋ぐと、2つの繋ぎ先の間でとどまります。
	線の方向に対してマージンを設けることもできます。

- コンポーネント自体にサイズの制約を付けることもできます。
	大きく分けて3つあります。
	1つ目は`Fixed`で、固定の大きさに設定できます。
	2つ目は`match_parent`で、取れるだけ幅を取ります。
	3つ目は`wrap_content`で、可能な限り小さい幅に設定されます。

- 画面をいろんな場面に対応させたい場合に複数の方法があります。
	1つ目は画面によって配置や大きさを変える方法です。
	複数のlayoutを記述して場合によって違うものを設定するものです。
	画面が横になった時は、縦の時と配置を変えたい場合などでよく使います。

	2つ目は画面がはみ出るときにスクロールできるようにする方法です。
	現在設定しているlayoutを囲むようにScrollViewのレイアウトで囲んでやることでスクロールできるようになります。
	配置しているlayoutの幅だけしかスクロールできないので、無駄なスクロールが入ったりすることはありません。

	3つ目はある程度のサイズでlayouutを作っておいて、その配置を崩したくない場合の方法です。
	見た目を作っているlayoutを囲むようにlayoutを配置します。
	その上で見た目のlayoutを中央に配置します。
	そうすればある程度の場合で、見やすい場所に適切な配置がされます。
	問題があるとすれば画面が極端に予想よりも大きくなった場合に、画面に対してlayoutのサイズが小さくなりすぎることもあります。
